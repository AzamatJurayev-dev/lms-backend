model User {
  id       Int    @id @default(autoincrement())
  username String @unique

  firstName  String?
  lastName   String?
  middleName String?

  password    String
  phoneNumber String?

  isActive          Boolean @default(true)
  isSystem          Boolean @default(false)
  canChangePassword Boolean @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  roleId Int?
  role   Role? @relation(fields: [roleId], references: [id])

  companyId Int?
  company   Company? @relation(fields: [companyId], references: [id])

  student            Student?
  teacher            Teacher?
  notifications      Notification[]
  questions          Question[]
  quizzes            Quiz[]
  tests              Test[]
  chatRooms          ChatRoom[]          @relation("ChatRoomCreatedBy")
  chatParticipants   ChatParticipant[]
  chatMessages       ChatMessage[]       @relation("ChatMessageSender")
  files              File[]
  quizLeaderboards   QuizLeaderboard[]
  testAttemptAnswers TestAttemptAnswer[]
  quizAttemptAnswers QuizAttemptAnswer[]
  testAttempts       TestAttempt[]
  quizAttempts       QuizAttempt[]
}

model Teacher {
  id         Int     @id
  experience String?

  bio       String?
  photo     String?
  subjects  Subject[]
  birthDate DateTime?

  user User @relation(fields: [id], references: [id])

  companyId Int?
  company   Company? @relation(fields: [companyId], references: [id])
  groups    Group[]
  lessons   Lesson[]
}

model Student {
  id        Int       @id
  bio       String?
  hobby     String?
  birthDate DateTime?
  address   String?

  user User @relation(fields: [id], references: [id], onDelete: Cascade)

  companyId    Int?
  company      Company?         @relation(fields: [companyId], references: [id])
  parents      Parent[]
  groups       Group[]
  attendances  Attendance[]
  performances Performance[]
  payments     StudentPayment[]
  certificates Certificate[]
}

model Parent {
  id    Int        @id @default(autoincrement())
  name  String
  phone String
  type  ParentType

  companyId Int?
  company   Company? @relation(fields: [companyId], references: [id])

  studentId Int
  student   Student @relation(fields: [studentId], references: [id])
}

enum ParentType {
  father
  mother
  guardian
}
